<div class="d-flex mb-3 p-3 border border-opacity-100 bg-white rounded ">
    <select id="depId" name="depId" class="form-select" style="width: 150px;">
    </select>
</div>

<div class="p-3 mb-3 border border-opacity-100 bg-white rounded">
    <div class="container">
        <div class="row mt-5">
            <div class="col-md-4">
                <h2 class="text-center mb-4">可選課程</h2>
                <ul id="availableCourses" class="list-group">
                    <!-- 預設資料 -->
                    <li class="list-group-item course-item" data-course="數學" data-time="1-1">數學 - 星期一 第一節</li>
                    <li class="list-group-item course-item" data-course="英文" data-time="2-2">英文 - 星期二 第二節</li>
                    <li class="list-group-item course-item" data-course="物理" data-time="3-3">物理 - 星期三 第三節</li>
                    <li class="list-group-item course-item" data-course="化學" data-time="4-4">化學 - 星期四 第四節</li>
                    <li class="list-group-item course-item" data-course="生物" data-time="5-5">生物 - 星期五 第五節</li>
                </ul>
            </div>
            <div class="col-md-4 d-flex flex-column justify-content-center align-items-center">
                <button id="addCourse" class="btn btn-primary mb-2">加選 &gt;&gt;</button>
                <button id="removeCourse" class="btn btn-danger mt-2">&lt;&lt; 退選</button>
            </div>
            <div class="col-md-4">
                <h2 class="text-center mb-4">已選課程</h2>
                <ul id="selectedCourses" class="list-group">
                    <!-- 已選課程列表 -->
                </ul>
            </div>
        </div>
        <div class="row mt-5">
            <div class="col-md-12">
                <div class="p-3 mb-3 border border-opacity-100 bg-white rounded">
                    <h2 class="text-center mb-4">課表</h2>
                    <table class="table table-bordered table-striped schedule-table text-center">
                        <thead>
                            <tr>
                                <th></th>
                                <th>星期一</th>
                                <th>星期二</th>
                                <th>星期三</th>
                                <th>星期四</th>
                                <th>星期五</th>
                            </tr>
                        </thead>
                        <tbody id="scheduleBody">
                            <tr>
                                <th>08:00 - 08:50<br>第一節</th>
                                <td data-time="1-1"></td>
                                <td data-time="2-1"></td>
                                <td data-time="3-1"></td>
                                <td data-time="4-1"></td>
                                <td data-time="5-1"></td>
                            </tr>
                            <tr>
                                <th>09:00 - 09:50<br>第二節</th>
                                <td data-time="1-2"></td>
                                <td data-time="2-2"></td>
                                <td data-time="3-2"></td>
                                <td data-time="4-2"></td>
                                <td data-time="5-2"></td>
                            </tr>
                            <tr>
                                <th>10:00 - 10:50<br>第三節</th>
                                <td data-time="1-3"></td>
                                <td data-time="2-3"></td>
                                <td data-time="3-3"></td>
                                <td data-time="4-3"></td>
                                <td data-time="5-3"></td>
                            </tr>
                            <tr>
                                <th>11:00 - 11:50<br>第四節</th>
                                <td data-time="1-4"></td>
                                <td data-time="2-4"></td>
                                <td data-time="3-4"></td>
                                <td data-time="4-4"></td>
                                <td data-time="5-4"></td>
                            </tr>
                            <tr>
                                <th colspan="6" class="text-center bg-light">中午休息</th>
                            </tr>
                            <tr>
                                <th>13:00 - 13:50<br>第五節</th>
                                <td data-time="1-5"></td>
                                <td data-time="2-5"></td>
                                <td data-time="3-5"></td>
                                <td data-time="4-5"></td>
                                <td data-time="5-5"></td>
                            </tr>
                            <tr>
                                <th>14:00 - 14:50<br>第六節</th>
                                <td data-time="1-6"></td>
                                <td data-time="2-6"></td>
                                <td data-time="3-6"></td>
                                <td data-time="4-6"></td>
                                <td data-time="5-6"></td>
                            </tr>
                            <tr>
                                <th>15:00 - 15:50<br>第七節</th>
                                <td data-time="1-7"></td>
                                <td data-time="2-7"></td>
                                <td data-time="3-7"></td>
                                <td data-time="4-7"></td>
                                <td data-time="5-7"></td>
                            </tr>
                            <tr>
                                <th>16:00 - 16:50<br>第八節</th>
                                <td data-time="1-8"></td>
                                <td data-time="2-8"></td>
                                <td data-time="3-8"></td>
                                <td data-time="4-8"></td>
                                <td data-time="5-8"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        loadDepartment();
        // 點擊課程項目時選中課程
        $(document).on('click', '.course-item', function() {
            $('.course-item').removeClass('active');
            $(this).addClass('active');
        });

        // 加選課程
        $('#addCourse').on('click', function() {
            var selectedCourse = $('#availableCourses .active');
            if (selectedCourse.length > 0) {
                var course = selectedCourse.data('course');
                var time = selectedCourse.data('time');
                var cell = $('td[data-time="' + time + '"]');

                if (cell.text() === "") {
                    // 新增課程到課表
                    cell.text(course);
                    selectedCourse.removeClass('active').appendTo('#selectedCourses');
                } else {
                    alert('該時段已有課程');
                }
            } else {
                alert('請選擇一門課程');
            }
        });

        // 退選課程
        $('#removeCourse').on('click', function() {
            var selectedCourse = $('#selectedCourses .active');
            if (selectedCourse.length > 0) {
                var course = selectedCourse.data('course');
                var time = selectedCourse.data('time');
                var cell = $('td[data-time="' + time + '"]');

                // 移除課表中的課程
                cell.text("");
                selectedCourse.removeClass('active').appendTo('#availableCourses');
            } else {
                alert('請選擇一門已選課程');
            }
        });

        // 移除課表中的課程時更新已選課程列表
        $('#scheduleBody td').on('click', function() {
            var course = $(this).text();
            if (course !== "") {
                $(this).text("");
                $('#selectedCourses .course-item').each(function() {
                    if ($(this).data('course') === course) {
                        $(this).removeClass('list-group-item-success').appendTo('#availableCourses');
                    }
                });
            }
        });
    });
</script>
